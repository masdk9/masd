<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Shahpathi</title>

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.0/font/bootstrap-icons.css">

    <link rel="stylesheet" href="css/main.css">
    <link rel="stylesheet" href="css/auth.css">
    <link rel="stylesheet" href="css/feed.css">
    <link rel="stylesheet" href="css/create.css">
    <link rel="stylesheet" href="css/profile.css">
    <link rel="stylesheet" href="css/study.css">
</head>

<body data-theme="light">

    <div id="dynamic-header" class="universal-header" style="display: none;">
        <i class="bi bi-arrow-left" onclick="closeSubPage()"></i>
        <h5 id="dynamic-header-title">Details</h5>
    </div>

    <div id="auth-container">

        <div id="login-view" class="auth-view">
            <h2 class="mb-4 fw-bold">Login</h2>
            <div class="form-floating mb-3">
                <input type="email" class="form-control" id="login-email" placeholder="name@example.com">
                <label>Email address</label>
            </div>
            <div class="form-floating mb-3">
                <input type="password" class="form-control" id="login-pass" placeholder="Password">
                <label>Password</label>
            </div>
            <button class="btn btn-primary w-100 py-3 mb-3 fw-bold" onclick="handleLogin()">Log In</button>
            <p class="text-center text-secondary">
                New here? <span class="text-primary fw-bold" style="cursor:pointer" onclick="switchAuthMode('signup')">Create Account</span>
            </p>
        </div>

        <div id="signup-view" class="auth-view" style="display: none;">
            <h2 class="mb-4 fw-bold">Sign Up</h2>
            <div class="form-floating mb-3">
                <input type="text" class="form-control" id="signup-name" placeholder="Full Name">
                <label>Full Name</label>
            </div>
            <div class="form-floating mb-3">
                <input type="email" class="form-control" id="signup-email" placeholder="name@example.com">
                <label>Email address</label>
            </div>
            <div class="form-floating mb-3">
                <input type="password" class="form-control" id="signup-pass" placeholder="Password">
                <label>Password</label>
            </div>
            <button class="btn btn-primary w-100 py-3 mb-3 fw-bold" onclick="handleSignup()">Sign Up</button>
            <p class="text-center text-secondary">Already have an account? <span class="text-primary fw-bold" style="cursor:pointer" onclick="switchAuthMode('login')">Log In</span></p>
        </div>
    </div>


    <div id="app-container" style="display: none;">

        <nav id="main-header" class="navbar fixed-top top-header justify-content-between align-items-center">
            <a href="#" class="app-logo">Shahpathi</a>
            <div class="header-icon" onclick="openTab('messages', null)">
                <i class="bi bi-chat-square-dots-fill text-primary"></i>
                <span class="position-absolute top-0 start-100 translate-middle badge rounded-pill bg-danger" style="font-size:0.6rem; top: 15px !important; right: 10px;">5</span>
            </div>
        </nav>

        <div id="home" class="content-section" style="display: block; padding: 15px; padding-bottom: 80px;">

            <div class="custom-card p-3 d-flex align-items-center" onclick="openCreatePostModal()">
                <img id="my-avatar-small" src="assets/photos/hello.jpg" class="user-avatar-small me-3">
                <div style="background: var(--bg-color); flex: 1; padding: 10px 15px; border-radius: 20px; color: var(--secondary-text);"> Kuch naya post karein. </div>
            </div>

            <div id="feed-container">
                <div class="text-center mt-5 text-muted">
                    <div class="spinner-border text-primary" role="status"></div>
                    <p class="mt-2">Loading Posts...</p>
                </div>
            </div>
        </div>


        <div id="search" class="content-section" style="display: none; padding: 15px; padding-bottom: 80px;">
            <input type="text" class="form-control py-3 mb-3" placeholder="Search topics, exams..." style="border-radius: 12px;">
            <h6 class="text-muted fw-bold mb-3">TRENDING</h6>
            <div class="d-flex flex-wrap gap-2">
                <span class="search-tag">SSC CGL</span>
                <span class="search-tag">UPSC 2026</span>
                <span class="search-tag">Science Quiz</span>
                <span class="search-tag">Maths Formulas</span>
            </div>
        </div>


        <div id="study" class="content-section" style="display: none; padding: 15px; padding-bottom: 80px;">

            <div id="study-main-grid">
                <h6 class="studytabtitle">RESOURCES</h6>
                <div class="row g-2 mb-4">
                    <div class="col-3">
                        <div class="study-grid-card" onclick="openStudySubView('notes-view', 'Notes')">
                            <i class="bi bi-file-earmark-pdf-fill study-icon-sm text-danger"></i>
                            <div class="study-title-sm">Notes</div>
                        </div>
                    </div>
                    <div class="col-3">
                        <div class="study-grid-card" onclick="openStudySubView('books-view', 'Books')"><i class="bi bi-journal-bookmark-fill study-icon-sm text-primary"></i>
                            <div class="study-title-sm">Books</div>
                        </div>
                    </div>
                    <div class="col-3">
                        <div class="study-grid-card" onclick="openStudySubView('videos-view', 'Videos')"><i class="bi bi-play-btn-fill study-icon-sm text-success"></i>
                            <div class="study-title-sm">Videos</div>
                        </div>
                    </div>
                    <div class="col-3">
                        <div class="study-grid-card"><i class="bi bi-clock-history study-icon-sm text-warning"></i>
                            <div class="study-title-sm">PYQ</div>
                        </div>
                    </div>
                </div>
            </div>

            <div id="notes-view" class="study-sub-view" style="display: none;">
                <div id="notes-list-container" class="mt-3"></div>
            </div>
        </div>


        <div id="alerts" class="content-section" style="display: none; padding: 15px; padding-bottom: 80px;">
            <h6 class="text-center text-muted mt-5">No new notifications</h6>
        </div>


        <div id="profile" class="content-section" style="display: none; padding: 15px; padding-bottom: 80px;">
            <div class="profile-card">
                <div class="img-wrap">
                    <img id="profile-display-img" src="assets/photos/annadp.png" class="profile-pic-big">
                    <div class="edit-icon"><i class="bi bi-pencil-fill"></i></div>
                </div>
                <h3 id="profile-display-name" class="user-name">Student</h3>
                <div id="profile-display-email" class="user-handle">...</div>

                <div class="stats-row">
                    <div class="stat-item"><span class="stat-num">0</span><span class="stat-label">Posts</span></div>
                    <div class="stat-item"><span class="stat-num">0</span><span class="stat-label">Followers</span></div>
                    <div class="stat-item"><span class="stat-num">0</span><span class="stat-label">Following</span></div>
                </div>
            </div>

            <div class="menu-card">
                <div class="menu-item" onclick="openSubPage('account-center', 'Edit Profile'); loadEditData();">
                    <div class="menu-icon"><i class="bi bi-person-circle"></i></div>
                    <div class="menu-text">Edit Profile</div>
                    <i class="bi bi-chevron-right chevron"></i>
                </div>

                <div class="menu-item" onclick="openSubPage('app-settings', 'Settings')">
                    <div class="menu-icon"><i class="bi bi-gear-fill"></i></div>
                    <div class="menu-text">Settings</div>
                    <i class="bi bi-chevron-right chevron"></i>
                </div>
            </div>
            <button class="btn-logout" onclick="handleLogout()">Log Out</button>
        </div>


        <div class="bottom-nav fixed-bottom d-flex justify-content-between align-items-center">
            <div class="nav-item-custom active" onclick="openTab('home', this)">
                <i class="bi bi-house-door-fill"></i><span>Home</span>
            </div>
            <div class="nav-item-custom" onclick="openTab('search', this)">
                <i class="bi bi-search"></i><span>Search</span>
            </div>
            <div class="nav-item-custom" onclick="openTab('study', this)">
                <i class="bi bi-book-half"></i><span>Study</span>
            </div>
            <div class="nav-item-custom" onclick="openTab('alerts', this)">
                <i class="bi bi-bell-fill"></i><span>Alerts</span>
            </div>
            <div class="nav-item-custom" onclick="openTab('profile', this)">
                <i class="bi bi-person-fill"></i><span>Profile</span>
            </div>
        </div>
    </div>


    <div id="create-post-modal">
        <div class="d-flex align-items-center justify-content-between p-3 border-bottom bg-white">
            <i class="bi bi-x-lg fs-4" onclick="closeCreatePostModal()"></i>
            <h5 class="m-0 fw-bold">Create Post</h5>
            <button class="btn btn-primary rounded-pill px-4" onclick="publishPost()">Post</button>
        </div>

        <div id="text-editor-wrapper" class="style-clean">
            <textarea id="main-textarea" placeholder="What's on your mind?" oninput="autoResize(this)"></textarea>
        </div>

        <div id="dynamic-input-area" class="p-3 d-none"></div>

        <div class="fixed-bottom bg-white p-3 border-top">
            <div class="quick-palette mb-3">
                <div class="color-circle active-circle" style="background:var(--card-bg); border:2px solid #ccc" onclick="applyColor('none', this)"></div>
                <div class="color-circle" style="background: linear-gradient(135deg, #FF9A8B, #FF6A88);" onclick="applyColor('grad-sunset', this)"></div>
                <div class="color-circle" style="background: linear-gradient(135deg, #2AFADF, #4C83FF);" onclick="applyColor('grad-ocean', this)"></div>
                <div class="picker-btn" onclick="toggleExtendedPicker()"><i class="bi bi-eyedropper"></i></div>
            </div>

            <div id="extended-picker">
                <div class="color-grid" id="grid-solid"></div>
            </div>

            <div class="chip-container">
                <div class="chip-btn active" onclick="switchPostMode('text', this)"><i class="bi bi-pencil-square"></i> Text</div>
                <div class="chip-btn" onclick="switchPostMode('quiz', this)"><i class="bi bi-list-check"></i> Quiz</div>
                <div class="chip-btn" onclick="switchPostMode('poll', this)"><i class="bi bi-bar-chart-fill"></i> Poll</div>
                <div class="chip-btn" onclick="switchPostMode('media', this)"><i class="bi bi-image"></i> Media</div>
            </div>
        </div>
    </div>


    <div id="app-settings" class="content-section" style="padding-top:0; display:none">
        <div class="p-2 pb-5">
            <div class="section-label">Preferences</div>
            <div class="card-group">
                <div class="item active" onclick="this.classList.toggle('active')">
                    <div class="item-left"><i class="bi bi-bell item-icon"></i><span class="item-title">Push Notifications</span></div>
                    <div class="toggle"></div>
                </div>

                <div class="item dm-toggle" onclick="toggleDarkMode()">
                    <div class="item-left"><i class="bi bi-moon item-icon"></i><span class="item-title">Dark Mode</span></div>
                    <div class="toggle"></div>
                </div>
                <div class="item">
                    <div class="item-left"><i class="bi bi-translate item-icon"></i><span class="item-title">Language</span></div>
                    <div class="item-right">English <i class="bi bi-chevron-right chevron"></i></div>
                </div>
            </div>
            <div class="section-label">Security</div>
            <div class="card-group">
                <div class="item">
                    <div class="item-left"><i class="bi bi-lock item-icon"></i><span class="item-title">Password</span></div>
                    <div class="item-right"><i class="bi bi-chevron-right chevron"></i></div>
                </div>

                <div class="item active" onclick="this.classList.toggle('active')">
                    <div class="item-left"><i class="bi bi-fingerprint item-icon"></i><span class="item-title">Biometric Login</span></div>
                    <div class="toggle"></div>
                </div>
            </div>
            <div class="section-label">About</div>
            <div class="card-group">
                <div class="item">
                    <div class="item-left"><i class="bi bi-info-circle item-icon"></i><span class="item-title">App Version</span></div>
                    <div class="item-right">v2.0.1</div>
                </div>
            </div>
        </div>
    </div>


    <div id="account-center" class="content-section" style="padding-top:0; display:none">
        <div class="p-3 pb-5">
            <div class="edit-dp-wrapper">
                <img src="https://randomuser.me/api/portraits/men/32.jpg" class="edit-dp-img">
                <div class="edit-cam-badge">
                    <i class="bi bi-camera-fill"></i>
                </div>
            </div>
            <div class="row g-2 mt-2">
                <div class="col-12">
                    <div class="form-floating">
                        <input type="text" class="form-control" id="fname" value="Amit Sharma" placeholder="Name">
                        <label for="fname">Full Name</label>
                    </div>
                </div>
                <div class="col-12">
                    <div class="form-floating">
                        <input type="text" class="form-control" id="uname" value="amit_dev" placeholder="User">
                        <label for="uname">Username</label>
                    </div>
                </div>
                <div class="col-12">
                    <div class="form-floating">
                        <input type="email" class="form-control" id="email" value="amit@example.com" placeholder="Email">
                        <label for="email">Email Address</label>
                    </div>
                </div>
                <div class="col-2">
                    <button class="btn-update-profile">Update</button>
                </div>
            </div>
        </div>
    </div>


    <div class="offcanvas offcanvas-bottom" tabindex="-1" id="kebabMenu">
        <div class="offcanvas-header justify-content-center pb-1 pt-3">
            <div class="menu-handle"></div>
        </div>
        <div class="offcanvas-body px-0 pt-1 pb-4">
            <div class="menu-list-item"><i class="bi bi-link-45deg"></i> Copy Link</div>
            <div class="menu-divider"></div>
            <div class="menu-list-item menu-cancel-btn" data-bs-dismiss="offcanvas">Cancel</div>
        </div>
    </div>


    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-auth.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-firestore.js"></script>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>

    <script src="js/firebase-cfg.js"></script>
    <script src="js/auth.js"></script>
    <script src="js/main.js"></script>
    <script src="js/feed.js"></script>
    <script src="js/create.js"></script>
    <script src="js/profile.js"></script>
    <script src="js/study.js"></script>

</body>

</html>
